<!DOCTYPE html>
<html itemscope itemtype="http://schema.org/WebPage" lang="zh-cn">
  <head><script src="/livereload.js?mindelay=10&amp;v=2&amp;port=1313&amp;path=livereload" data-no-instant defer></script>
    
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
    <meta name="robots" content="noodp" />
    <title>组件化模块化在移动应用开发中 - 主页</title><meta name="author" content="">
<meta name="description" content="在移动应用上由于应用本身与使用者相贴近，日常开发中难免的需求变更朝令夕改、朝三暮四，尤其遇到没啥规范流程的或者形式主义流程"><meta name="keywords" content='draft'>
  <meta itemprop="name" content="组件化模块化在移动应用开发中">
  <meta itemprop="description" content="在移动应用上由于应用本身与使用者相贴近，日常开发中难免的需求变更朝令夕改、朝三暮四，尤其遇到没啥规范流程的或者形式主义流程">
  <meta itemprop="datePublished" content="2020-02-19T00:00:00+08:00">
  <meta itemprop="dateModified" content="2020-02-19T00:00:00+08:00">
  <meta itemprop="wordCount" content="139">
  <meta itemprop="keywords" content="Draft"><meta property="og:url" content="http://localhost:1313/posts/583bc6c/">
  <meta property="og:site_name" content="主页">
  <meta property="og:title" content="组件化模块化在移动应用开发中">
  <meta property="og:description" content="在移动应用上由于应用本身与使用者相贴近，日常开发中难免的需求变更朝令夕改、朝三暮四，尤其遇到没啥规范流程的或者形式主义流程">
  <meta property="og:locale" content="zh_cn">
  <meta property="og:type" content="article">
    <meta property="article:section" content="posts">
    <meta property="article:published_time" content="2020-02-19T00:00:00+08:00">
    <meta property="article:modified_time" content="2020-02-19T00:00:00+08:00">
    <meta property="article:tag" content="Draft">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="组件化模块化在移动应用开发中">
  <meta name="twitter:description" content="在移动应用上由于应用本身与使用者相贴近，日常开发中难免的需求变更朝令夕改、朝三暮四，尤其遇到没啥规范流程的或者形式主义流程">
<meta name="application-name" content="FixIt">
<meta name="apple-mobile-web-app-title" content="FixIt"><meta name="theme-color" data-light="#f8f8f8" data-dark="#252627" content="#f8f8f8"><meta name="msapplication-TileColor" content="#da532c"><link rel="shortcut icon" type="image/x-icon" href="/favicon.ico" />
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png"><link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png"><link rel="mask-icon" href="/safari-pinned-tab.svg" color="#5bbad5"><link rel="canonical" type="text/html" href="http://localhost:1313/posts/583bc6c/" title="组件化模块化在移动应用开发中 - 主页" /><link rel="next" type="text/html" href="http://localhost:1313/posts/a7416d2/" title="一个人的组件化" /><link rel="stylesheet" href="/css/style.min.css"><link rel="preload" href="/lib/fontawesome-free/all.min.css" as="style" onload="this.removeAttribute('onload');this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="/lib/fontawesome-free/all.min.css"></noscript><link rel="preload" href="/lib/animate/animate.min.css" as="style" onload="this.removeAttribute('onload');this.rel='stylesheet'">
    <noscript><link rel="stylesheet" href="/lib/animate/animate.min.css"></noscript><script type="application/ld+json">
  {
    "@context": "http://schema.org",
    "@type": "BlogPosting",
    "headline": "组件化模块化在移动应用开发中",
    "inLanguage": "zh-cn",
    "mainEntityOfPage": {
      "@type": "WebPage",
      "@id": "http:\/\/localhost:1313\/posts\/583bc6c\/"
    },"genre": "posts","keywords": "draft","wordcount":  139 ,
    "url": "http:\/\/localhost:1313\/posts\/583bc6c\/","datePublished": "2020-02-19T00:00:00+08:00","dateModified": "2020-02-19T00:00:00+08:00","publisher": {
      "@type": "Organization",
      "name": ""},"description": ""
  }
  </script><script src="/js/head/color-scheme.min.js"></script></head>
  <body data-header-desktop="sticky" data-header-mobile="auto"><div class="wrapper" data-page-style="normal"><header class="desktop animate__faster" id="header-desktop">
  <div class="header-wrapper">
    <div class="header-title">
      <a href="/" title="主页"><span class="header-title-text">主页</span></a><span class="header-subtitle"></span></div>
    <nav>
      <ul class="menu"><li class="menu-item">
              <a class="menu-link" href="/archives/" title="归档"><i class="fa-solid fa-archive fa-fw fa-sm" aria-hidden="true"></i> 归档</a></li><li class="menu-item">
              <a class="menu-link" href="/categories/" title="分类"><i class="fa-solid fa-folder-tree fa-fw fa-sm" aria-hidden="true"></i> 分类</a></li><li class="menu-item">
              <a class="menu-link" href="/tags/" title="标签"><i class="fa-solid fa-tags fa-fw fa-sm" aria-hidden="true"></i> 标签</a></li><li class="menu-item delimiter"></li><li class="menu-item theme-switch" title="Switch Theme">
          <i class="fa-solid fa-adjust fa-fw" aria-hidden="true"></i>
        </li></ul>
    </nav>
  </div>
</header><header class="mobile animate__faster" id="header-mobile">
  <div class="header-container">
    <div class="header-wrapper">
      <div class="header-title">
        <a href="/" title="主页"><span class="header-title-text">主页</span></a><span class="header-subtitle"></span></div>
      <div class="menu-toggle" id="menu-toggle-mobile">
        <span></span><span></span><span></span>
      </div>
    </div>
    <nav>
      <ul class="menu" id="menu-mobile"><li class="menu-item"><a class="menu-link" href="/archives/" title="归档"><i class="fa-solid fa-archive fa-fw fa-sm" aria-hidden="true"></i> 归档</a></li><li class="menu-item"><a class="menu-link" href="/categories/" title="分类"><i class="fa-solid fa-folder-tree fa-fw fa-sm" aria-hidden="true"></i> 分类</a></li><li class="menu-item"><a class="menu-link" href="/tags/" title="标签"><i class="fa-solid fa-tags fa-fw fa-sm" aria-hidden="true"></i> 标签</a></li><li class="menu-item menu-system">
          <span class="menu-system-item theme-switch" title="Switch Theme"><i class="fa-solid fa-adjust fa-fw" aria-hidden="true"></i></span></li>
      </ul>
    </nav>
  </div>
</header><main class="container"><aside class="aside-collection animate__animated animate__fadeIn animate__faster" aria-label="Collections"></aside>

  <article class="page single">
    <div class="header"><h1 class="single-title animate__animated animate__flipInX"><span title="Repost" class="icon-repost"><i class="fa-solid fa-share fa-fw" aria-hidden="true"></i></span><span>组件化模块化在移动应用开发中</span>
      </h1></div><div class="post-meta">
      <div class="post-meta-line"><span class="post-author"><span class="author"><i class="fa-solid fa-user-circle" aria-hidden="true"></i>
      Anonymous</span></span><span class="post-included-in">&nbsp;included in <a href="/categories/draft/" class="post-category" title="Category - Draft"><i class="fa-regular fa-folder fa-fw" aria-hidden="true"></i> Draft</a></span></div><div class="post-meta-line"><span title="published on 2020-02-19 00:00:00"><i class="fa-solid fa-calendar-days fa-fw me-1" aria-hidden="true"></i><time datetime="2020-02-19">2020-02-19</time></span>&nbsp;<span title="139 words"><i class="fa-solid fa-pencil-alt fa-fw me-1" aria-hidden="true"></i>About 200 words</span>&nbsp;<span><i class="fa-regular fa-clock fa-fw me-1" aria-hidden="true"></i>One minute</span>&nbsp;</div>
    </div><div class="details toc" id="toc-static" data-kept="false">
        <div class="details-summary toc-title">
          <span>Contents</span>
          <span><i class="details-icon fa-solid fa-angle-right" aria-hidden="true"></i></span>
        </div>
        <div class="details-content toc-content" id="toc-content-static"><nav id="TableOfContents">
  <ul>
    <li>
      <ul>
        <li>
          <ul>
            <li>
              <ul>
                <li><a href="#linusread-the-fucking-source-code">Linus:Read the fucking source code</a></li>
              </ul>
            </li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#组件-模块">组件 模块</a></li>
    <li><a href="#由简单到复杂">由简单到复杂</a>
      <ul>
        <li>
          <ul>
            <li><a href="#长--短之相形难-易之相成">长  短之相形，难 易之相成</a></li>
          </ul>
        </li>
      </ul>
    </li>
    <li><a href="#我们的组件化目标">我们的组件化目标</a>
      <ul>
        <li><a href="#最终效果">最终效果</a></li>
      </ul>
    </li>
    <li><a href="#组件化模块化需要解决的问题">组件化模块化需要解决的问题</a></li>
    <li><a href="#images2-4jpgimages2-4jpg"><img src="/images/2-4.jpg" alt="/images/2-4.jpg"></a></li>
  </ul>
</nav></div>
      </div><div class="content" id="content"><p><img loading="lazy" src="/images/2-1.jpg" alt="/images/2-1.jpg" srcset="/images/2-1.jpg?size=small, /images/2-1.jpg?size=medium 1.5x, /images/2-1.jpg?size=large 2x" data-title="/images/2-1.jpg" style="background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></p>
<h2 id="组件化模块化" class="heading-element"><span>组件化模块化</span>
  <a href="#%e7%bb%84%e4%bb%b6%e5%8c%96%e6%a8%a1%e5%9d%97%e5%8c%96" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><p>[TOC]
在移动应用上由于应用本身与使用者相贴近，日常开发中难免的需求变更朝令夕改、朝三暮四，尤其遇到没啥规范流程的或者形式主义流程；</p>
<p>关于组件化模块化是什么及其优点不再赘述，在此补充点优点而已：减少名言的联想</p>
<blockquote>
<h5 id="linusread-the-fucking-source-code" class="heading-element"><span>Linus:Read the fucking source code</span>
  <a href="#linusread-the-fucking-source-code" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h5></blockquote>
<p>我们的终极目标不仅是解耦等。简化、轻量化框架，减少过分约束而给予组件/模块内充分的自由，从初始设计已有两年余，由于重复搬砖没得时间记录，
文章中尽量不贴fucking code，有良好的思路大家都会有很好合适自身需求的实现。</p>
<h2 id="组件-模块" class="heading-element"><span>组件 模块</span>
  <a href="#%e7%bb%84%e4%bb%b6-%e6%a8%a1%e5%9d%97" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><p>鉴于网上很多文章对于<strong>组件</strong>和<strong>模块</strong>的定义众说纷纭，再次声明本文定义，参考资料来源维基百科</p>
<p><strong>基于<a href="https://wiki.kfd.me/wiki/%E5%9F%BA%E4%BA%8E%E7%BB%84%E4%BB%B6%E7%9A%84%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B"target="_blank" rel="external nofollow noopener noreferrer">组件</a>的软件工程（Component-based software engineering，简称</strong>CBSE**）或<strong>基于组件的开发</strong>（Component-Based Development，简称<strong>CBD</strong>）是一种<a href="https://zh.wikipedia.org/w/index.php?title=%e8%bd%af%e4%bb%b6%e5%bc%80%e5%8f%91%e8%8c%83%e5%9e%8b&amp;action=edit&amp;redlink=1"target="_blank" rel="external nofollow noopener noreferrer">软件开发范型</a>。它是现今<a href="https://zh.wikipedia.org/wiki/%e8%bd%af%e4%bb%b6%e5%a4%8d%e7%94%a8"target="_blank" rel="external nofollow noopener noreferrer">软件复用</a>理论实用化的研究热点，在<a href="https://zh.wikipedia.org/wiki/%e7%bb%84%e4%bb%b6%e5%af%b9%e8%b1%a1%e6%a8%a1%e5%9e%8b"target="_blank" rel="external nofollow noopener noreferrer">组件对象模型</a>的支持下，通过复用已有的<a href="https://zh.wikipedia.org/wiki/%e6%9e%84%e4%bb%b6"target="_blank" rel="external nofollow noopener noreferrer">构件</a>，软件开发者可以“<a href="https://zh.wikipedia.org/wiki/%e5%8d%b3%e6%8f%92%e5%8d%b3%e7%94%a8"target="_blank" rel="external nofollow noopener noreferrer">即插即用</a>”地快速构造<a href="https://zh.wikipedia.org/wiki/%e5%ba%94%e7%94%a8%e8%bd%af%e4%bb%b6"target="_blank" rel="external nofollow noopener noreferrer">应用软件</a>。这样不仅可以节省时间和经费，提高工作效率，而且可以产生更加规范、更加可靠的应用软件</p>
<p><strong><a href="https://wiki.kfd.me/wiki/%E6%A8%A1%E7%B5%84"target="_blank" rel="external nofollow noopener noreferrer">模块</a></strong> 是指由数个基础功能组件组成的特定功能组件，可用来组成具完整功能之系统、设备或程序。模块通常都会具有相同的<a href="https://zh.wikipedia.org/wiki/%e8%a3%bd%e7%a8%8b"target="_blank" rel="external nofollow noopener noreferrer">制程</a>或<a href="https://zh.wikipedia.org/wiki/%e9%82%8f%e8%bc%af"target="_blank" rel="external nofollow noopener noreferrer">逻辑</a>，更改其组成组件可调适其功能或用途。</p>
<p>综上<strong>组件</strong>Component是一种工具功能性质，而<strong>模块</strong>Module具有系统功能性质。例如jetpack中的构架组件.</p>
<p>模型model与模块还是区分对待。</p>
<h2 id="由简单到复杂" class="heading-element"><span>由简单到复杂</span>
  <a href="#%e7%94%b1%e7%ae%80%e5%8d%95%e5%88%b0%e5%a4%8d%e6%9d%82" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><blockquote>
<h4 id="长--短之相形难-易之相成" class="heading-element"><span>长  短之相形，难 易之相成</span>
  <a href="#%e9%95%bf--%e7%9f%ad%e4%b9%8b%e7%9b%b8%e5%bd%a2%e9%9a%be-%e6%98%93%e4%b9%8b%e7%9b%b8%e6%88%90" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h4></blockquote>
<p>任何系统都是由简单到复杂逐渐演化构成。类似于生态系统。稳定而强大的系统均是由简单的逐渐进化为复杂的系统。简单系统需要具备可进化性，其高一级系统需要有可退化性。而进化的必要因素时间</p>
<p>从AndroidX JetPack开始，构件一个兼具进化与退化的弹性系统框架。适应目的，分离表现层显示层，重复常用功能视图层操作形式已经定型的提取VM/模型组件，如视频播放 已知用户需求暂停,快进,声音,亮度;接口提供给了UI层，但UI层又要重新写SeekBar，Button 等UI控件，进一步看Seek Bar等也有自身的一些约定成俗的习惯性响应，这种VM组件是否可以直接包含这些UI控件，由视图层使用时传入，VM层仅仅与控件互动与Seek Bar的进度和与Button点击，而不关心UI层传入的是什么样子的控件，也不关心控件的位置，这些全都是UI层的事情。其实可以传入对应的接口控件，但当前控件没有进化到这一代。</p>
<p><strong>Model模型层</strong>做提供实质性需求的业务。如视频播放，用什么播放器，自带的第三方的由mondel接管。用户需求是从视图层发起请求，VM层处理视图发起后的请求给Model去处理，Model处理后结果由VM层得知，VM又由更新数据去更新UI。</p>
<p>完成于此后。除非播放器更新换代，添加了其他功能（预览帧，GIF截取）VM,与M均不需要更新code.重复的搬砖仅仅是将UI搬运。</p>
<h2 id="我们的组件化目标" class="heading-element"><span>我们的组件化目标</span>
  <a href="#%e6%88%91%e4%bb%ac%e7%9a%84%e7%bb%84%e4%bb%b6%e5%8c%96%e7%9b%ae%e6%a0%87" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><p>首先肯定是解耦，防止代码污染；其次单模块调试，方便调试加快编译速度，提高专注效率；然后是框架轻量尽量不入侵，不过分限制模块，给模块内自由；能快速构建其一个基础功能齐全的Hello World；</p>
<h3 id="最终效果" class="heading-element"><span>最终效果</span>
  <a href="#%e6%9c%80%e7%bb%88%e6%95%88%e6%9e%9c" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h3><p>外核保护内核，仅暴露少量Base类接口，这些类的具体实现都在内核包中实现，可混淆后发布aar到项目私有maven，由开发版的外核配置依赖具体版本的内核；外核包中的少量类仅有及少量代码；</p>
<p><img loading="lazy" src="/images/2-2-2.jpg" alt="/images/2-2-2.jpg" srcset="/images/2-2-2.jpg?size=small, /images/2-2-2.jpg?size=medium 1.5x, /images/2-2-2.jpg?size=large 2x" data-title="/images/2-2-2.jpg" style="background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></p>
<p><img loading="lazy" src="/images/2-3.jpg" alt="/images/2-3.jpg" srcset="/images/2-3.jpg?size=small, /images/2-3.jpg?size=medium 1.5x, /images/2-3.jpg?size=large 2x" data-title="/images/2-3.jpg" style="background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></p>
<p><strong>网络请求</strong>（右上角切暗黑模式）</p>
<div class="highlight"><pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4;"><code class="language-java" data-lang="java"><span style="display:flex;"><span>	<span style="color:#75715e">//登录请求</span>
</span></span><span style="display:flex;"><span>    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">void</span> <span style="color:#a6e22e">click</span>() {
</span></span><span style="display:flex;"><span>        getViewModel(LoginViewModel.<span style="color:#a6e22e">class</span>)
</span></span><span style="display:flex;"><span>                .<span style="color:#a6e22e">sendAction</span>(<span style="color:#66d9ef">new</span> RequestAction()
</span></span><span style="display:flex;"><span>                        .<span style="color:#a6e22e">setTipsArgs</span>(<span style="color:#66d9ef">new</span> VmTipsArgs.<span style="color:#a6e22e">Builder</span>().<span style="color:#a6e22e">tipMessage</span>(<span style="color:#e6db74">&#34;请求失败了&#34;</span>).<span style="color:#a6e22e">build</span>())).
</span></span><span style="display:flex;"><span>                doOnData((action, data) <span style="color:#f92672">-&gt;</span> {
</span></span><span style="display:flex;"><span>                    AppLog.<span style="color:#a6e22e">d</span>(TAG, <span style="color:#e6db74">&#34;发起登录成功 doOnData1=&#34;</span>, data);
</span></span><span style="display:flex;"><span>                    showToast(<span style="color:#e6db74">&#34;登录成功1&#34;</span> <span style="color:#f92672">+</span> data);
</span></span><span style="display:flex;"><span>                })
</span></span><span style="display:flex;"><span>                .<span style="color:#a6e22e">doOnData</span>((action, data) <span style="color:#f92672">-&gt;</span> {
</span></span><span style="display:flex;"><span>                    AppLog.<span style="color:#a6e22e">d</span>(TAG, <span style="color:#e6db74">&#34;发起登录成功 doOnData2=&#34;</span>, data);
</span></span><span style="display:flex;"><span>                    showToast(<span style="color:#e6db74">&#34;登录成功2&#34;</span> <span style="color:#f92672">+</span> data);
</span></span><span style="display:flex;"><span>                })
</span></span><span style="display:flex;"><span>                .<span style="color:#a6e22e">doOnDone</span>(action <span style="color:#f92672">-&gt;</span> {
</span></span><span style="display:flex;"><span>                    AppLog.<span style="color:#a6e22e">d</span>(TAG, <span style="color:#e6db74">&#34;发起登录完成1&#34;</span>);
</span></span><span style="display:flex;"><span>                    showToast(<span style="color:#e6db74">&#34;登录结束&#34;</span>);
</span></span><span style="display:flex;"><span>                })
</span></span><span style="display:flex;"><span>                .<span style="color:#a6e22e">doOnListener</span>(action <span style="color:#f92672">-&gt;</span> {
</span></span><span style="display:flex;"><span>                    AppLog.<span style="color:#a6e22e">d</span>(TAG, <span style="color:#e6db74">&#34;开始登录 loading....&#34;</span>);
</span></span><span style="display:flex;"><span>                    showToast(<span style="color:#e6db74">&#34;loading....&#34;</span>);
</span></span><span style="display:flex;"><span>                })
</span></span><span style="display:flex;"><span>                .<span style="color:#a6e22e">doOnDone</span>(action <span style="color:#f92672">-&gt;</span> {
</span></span><span style="display:flex;"><span>                    AppLog.<span style="color:#a6e22e">d</span>(TAG, <span style="color:#e6db74">&#34;发起登录完成2&#34;</span>);
</span></span><span style="display:flex;"><span>                })
</span></span><span style="display:flex;"><span>                .<span style="color:#a6e22e">doOnError</span>((action, e) <span style="color:#f92672">-&gt;</span> {
</span></span><span style="display:flex;"><span>                    AppLog.<span style="color:#a6e22e">d</span>(TAG, <span style="color:#e6db74">&#34;登录失败&#34;</span>);
</span></span><span style="display:flex;"><span>                })
</span></span><span style="display:flex;"><span>        ;
</span></span><span style="display:flex;"><span>    }</span></span></code></pre></div><p>日志</p>
<pre tabindex="0"><code>MainActivity  doOnListener开始登录 loading....  
MainActivity  doOnData发起登录成功 doOnData1=  &#34;{uid:123}&#34; 
MainActivity  doOnData发起登录成功 doOnData2=  &#34;{uid:123}&#34;  
MainActivity  doOnDone发起登录完成1  
MainActivity  doOnDone发起登录完成2  </code></pre><h2 id="组件化模块化需要解决的问题" class="heading-element"><span>组件化模块化需要解决的问题</span>
  <a href="#%e7%bb%84%e4%bb%b6%e5%8c%96%e6%a8%a1%e5%9d%97%e5%8c%96%e9%9c%80%e8%a6%81%e8%a7%a3%e5%86%b3%e7%9a%84%e9%97%ae%e9%a2%98" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2><ol>
<li>
<p>组件隔离，模块独立，模块可单独调试；</p>
<p>每人只能看到框架代码和调试外壳代码，其他人的代码眼不见心不烦;（组件隔离：A组件的部分功能可抛出由其他组件B完成；模块独立：模块有自己的小生态，我在此为其添加统一的调试外壳，而不是变身app,浪费转换时间，也不需要写两份清单文件）</p>
</li>
<li>
<p>模块初始化注册【代码插桩；反射初始化等；ASM】<a href="https://github.com/qcks/public-maven-repo/blob/master/com/qckiss/plugin/lifecycle.register/README.md"target="_blank" rel="external nofollow noopener noreferrer">推荐模块初始化注册插件</a></p>
</li>
<li>
<p>组件/模块之间的通讯，相互调用，数据传递【modular-event ,eventBus,LiveData-Bus ,本地广播等】</p>
</li>
<li>
<p>组件/模块怎么通知其他组件响应某个事件（组件的视听功能）</p>
</li>
<li>
<p>模块界面之间的跳转，因为为了解耦，组件间不可以直接互相调用【ARouter等】</p>
</li>
<li>
<p>主项目获取并显示组件的fragment</p>
</li>
<li>
<p>组件间如何集成并调试</p>
</li>
<li>
<p>获取其他组件的数据或服务（发派信使携带任务，完成返回）</p>
</li>
<li>
<p>资源命名重复，资源本身重复冗余</p>
</li>
<li>
<p>组件之间避免过度依赖年轻的组件，基础组件避免依赖不成熟的第三方</p>
<p>其他: 暂不开源</p>
</li>
</ol>
<p>举例包含其中3，4，5，6的一个业务场景：</p>
<p>多个模块中的UI需要组合显示在某同一个界面中，牵扯数据刷新，模块间数据传递，及相互调用等问题</p>
<h2 id="images2-4jpgimages2-4jpg" class="heading-element"><span><img loading="lazy" src="/images/2-4.jpg" alt="/images/2-4.jpg" srcset="/images/2-4.jpg?size=small, /images/2-4.jpg?size=medium 1.5x, /images/2-4.jpg?size=large 2x" data-title="/images/2-4.jpg" style="background: url(/images/loading.min.svg) no-repeat center;" onload="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}this.dataset.lazyloaded='';" onerror="this.title=this.dataset.title;for(const i of ['style', 'data-title','onerror','onload']){this.removeAttribute(i);}"/></span>
  <a href="#images2-4jpgimages2-4jpg" class="heading-mark">
    <svg class="octicon octicon-link" viewBox="0 0 16 16" version="1.1" width="16" height="16" aria-hidden="true"><path d="m7.775 3.275 1.25-1.25a3.5 3.5 0 1 1 4.95 4.95l-2.5 2.5a3.5 3.5 0 0 1-4.95 0 .751.751 0 0 1 .018-1.042.751.751 0 0 1 1.042-.018 1.998 1.998 0 0 0 2.83 0l2.5-2.5a2.002 2.002 0 0 0-2.83-2.83l-1.25 1.25a.751.751 0 0 1-1.042-.018.751.751 0 0 1-.018-1.042Zm-4.69 9.64a1.998 1.998 0 0 0 2.83 0l1.25-1.25a.751.751 0 0 1 1.042.018.751.751 0 0 1 .018 1.042l-1.25 1.25a3.5 3.5 0 1 1-4.95-4.95l2.5-2.5a3.5 3.5 0 0 1 4.95 0 .751.751 0 0 1-.018 1.042.751.751 0 0 1-1.042.018 1.998 1.998 0 0 0-2.83 0l-2.5 2.5a1.998 1.998 0 0 0 0 2.83Z"></path></svg>
  </a>
</h2></div><div class="post-footer" id="post-footer">
  <div class="post-info">
    <div class="post-info-line">
      <div class="post-info-mod">
        <span title="Updated on 2020-02-19 00:00:00">Updated on 2020-02-19&nbsp;</span>
      </div></div><div class="post-info-line">
        <div class="post-info-md"></div>
        <div class="post-info-share">
          <span><a href="javascript:void(0);" title="Share on X" data-sharer="twitter" data-url="http://localhost:1313/posts/583bc6c/" data-title="组件化模块化在移动应用开发中" data-hashtags="draft"><i class="fa-brands fa-x-twitter fa-fw" aria-hidden="true"></i></a>
  <a href="javascript:void(0);" title="Share on Facebook" data-sharer="facebook" data-url="http://localhost:1313/posts/583bc6c/" data-hashtag="draft"><i class="fa-brands fa-facebook-square fa-fw" aria-hidden="true"></i></a>
  <a href="javascript:void(0);" title="Share on 微博" data-sharer="weibo" data-url="http://localhost:1313/posts/583bc6c/" data-title="组件化模块化在移动应用开发中"><i class="fa-brands fa-weibo fa-fw" aria-hidden="true"></i></a>
  </span>
        </div>
      </div></div>

  <div class="post-info-more">
    <section class="post-tags"><i class="fa-solid fa-tags fa-fw me-1" aria-hidden="true"></i><a href="/tags/draft/" class="post-tag" title="Tags - Draft">Draft</a></section>
    <section>
      <span><a href="javascript:void(0);" onclick="window.history.back();">Back</a></span>&nbsp;|&nbsp;<span><a href="/">Home</a></span>
    </section>
  </div><div class="post-nav"><a href="/posts/a7416d2/" class="post-nav-item" rel="next" title="一个人的组件化">一个人的组件化<i class="fa-solid fa-angle-right fa-fw" aria-hidden="true"></i></a></div>
</div>
</article>

  <aside class="toc" id="toc-auto" aria-label="Contents"><h2 class="toc-title">Contents&nbsp;<i class="toc-icon fa-solid fa-angle-down fa-fw" aria-hidden="true"></i></h2>
      <div class="toc-content" id="toc-content-auto"></div></aside></main><footer class="footer">
    <div class="footer-container"><div class="footer-line powered">Powered by <a href="https://gohugo.io/" target="_blank" rel="external nofollow noopener noreferrer" title="Hugo 0.140.2"><img class="hugo-icon" src="/images/hugo.min.svg" alt="Hugo logo" /> Hugo</a> | Theme - <a href="https://github.com/hugo-fixit/FixIt" target="_blank" rel="external" title="FixIt v0.3.17-07816709"><img class="fixit-icon" src="/images/fixit.min.svg" alt="FixIt logo" /> FixIt</a>
        </div><div class="footer-line copyright" itemscope itemtype="http://schema.org/CreativeWork"><i class="fa-regular fa-copyright fa-fw" aria-hidden="true"></i>
            <span itemprop="copyrightYear">2025</span><span class="author" itemprop="copyrightHolder">
              <a href="/"></a></span></div></div>
  </footer></div><div class="widgets"><div class="fixed-buttons animate__faster d-none"><div class="fixed-button back-to-top" role="button" aria-label="Back to Top"><i class="fa-solid fa-arrow-up fa-fw" aria-hidden="true"></i><span class="variant-numeric d-none">0%</span>
        </div></div><div id="mask"></div><noscript>
    <div class="noscript-warning">This website works best with JavaScript enabled.</div>
  </noscript>
</div><link rel="stylesheet" href="/lib/cookieconsent/cookieconsent.min.css"><script src="/lib/sharer/sharer.min.js" async defer></script><script src="/lib/cookieconsent/cookieconsent.min.js" defer></script><script>window.config={"code":{"copyTitle":"Copy to clipboard","editLockTitle":"Lock editable code block","editUnLockTitle":"Unlock editable code block","editable":true,"maxShownLines":10},"comment":{"enable":false},"cookieconsent":{"content":{"dismiss":"Got it!","link":"Learn more","message":"This website uses Cookies to improve your experience."},"enable":true,"palette":{"button":{"background":"#f0f0f0"},"popup":{"background":"#1aa3ff"}},"theme":"edgeless"},"version":"v0.3.17-07816709"};console.log('Page config:', window.config);</script><script src="/js/theme.min.js" defer></script></body>
</html>
